<%- include('../../partials/head.ejs')%>

    <%- include('../../partials/nav.ejs')%>
        <div class="container">
            <hr>
            <div class="card mt-5">
                <div class="card-header">
                    <h2>Edição de Usuário</h2>
                </div>
                <div class="card-body">

                    <form action="/user/novo" method="POST" class="row g-3 needs-validation" onsubmit="sub(event,this)"
                        novalidate id="form1" enctype="multipart/form-data">

                        <div class="col-md-2">
                            <div class="personal-image">
                                <label class="label">
                                    <input type="file" name="avatar" />
                                    <figure class="personal-figure">
                                        <img src="<%=user.foto%>" class="personal-avatar" alt="avatar">
                                        <figcaption class="personal-figcaption">
                                            <img
                                                src="https://raw.githubusercontent.com/ThiagoLuizNunes/angular-boilerplate/master/src/assets/imgs/camera-white.png">
                                        </figcaption>
                                    </figure>
                                </label>
                            </div>
                        </div>

                        <div class="col-md-10">
                            <label for="nome" class="form-label">Nome</label>
                            <input class="form-control" type="text" id="nome" name="nome"
                               autocomplete="x" required value="<%=user.nome%>">
                        </div>

                        <label for="email" class="form-label">Email
                            <input class="form-control" id="email" type="email" name="email" placeholder="davi@davi.com"
                                autocomplete="off" required value="<%=user.email%>">
                        </label>

                        <div class="col-md-6">
                            <label for="login" class="form-label">Login</label>
                            <input class="form-control" type="text" id="login" name="login" id="login"
                                placeholder="Davi_Henrique" autocomplete="x" required value="<%=user.login%>" onkeyup="limpo()">
                        </div>

                        <div class="col-md-6">
                            <label for="telefone" class="form-label">Telefone</label>
                            <input class="form-control" type="tel" id="phone" name="telefone"
                                placeholder="(86)9 9472-6085" autocomplete="x" required onkeypress="mask(this, mphone);"
                                onblur="mask(this, mphone);" maxlength="15" value="<%=user.telefone%>">
                        </div>
                                <!-- FALTA VALIDAR -->
                        <div class="col-md-4">
                            <label for="senhaAtual" class="form-label">Senha Atual</label>
                            <input class="form-control" type="password" id="senhaAtual" name="senhaAtual" placeholder="********"
                                required autocomplete="x">
                        </div>
                        <div class="col-md-4">
                            <label for="senha" class="form-label">Nova Senha</label>
                            <input class="form-control" type="password" id="senha" name="senha" placeholder="********"
                                required autocomplete="x">
                        </div>

                        <div class="col-md-4">
                            <label for="confirm" class="form-label">Confirma Senha</label>
                            <input class="form-control" type="password" id="confirm" name="confirm_pass"
                                placeholder="********" required>
                        </div>
                        <br>

                        <hr>

                        <button type="submit" class="btn btn-primary form-control" onclick="validar()">Criar</button>
                    </form>
                </div>
            </div>

        </div>
        </body>
        <%- include('../../partials/footer.ejs')%>
            <script>
                function limpo() {
                    limpar = document.getElementById('login').value
                    var l = limpar.replace(/\s/g, '')
                    limpar2 = document.getElementById('login').value = l
                }
            </script>
            <script src="/js/validar.js"></script>
            <script src="/js/telefone.js"></script>
            <script src="/js/sub.js"></script>